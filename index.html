<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>NAVAM</title>
    <script src="lib/rive-canvas.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&family=Nunito+Sans:wght@200;300;400;700;900;1000&family=Roboto:wght@100&family=Wix+Madefor+Display:wght@400;500;600;700;800&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Wix Madefor Display', sans-serif;
        }
    </style>
</head>

<body>

    <section class="canvas-container">
        <canvas id="canvas"></canvas>
    </section>
    <div class="layout">
        <section class="help-section">
            <div class="help-section-container">
                <div class="help-section-icon">
                    <img width="100px" src="icons/api.svg">
                </div>
                <div class="help-section-icon">
                    <img width="100px" src="icons/microservices.svg">
                </div>
                <div class="help-section-icon">
                    <img width="100px" src="icons/cloud_development.svg">
                </div>
            </div>
        </section>
        <section class="credentials-section">
            <div class="credentials-section-container">
                Credentials
            </div>
        </section>
        <section class="projects-section">
            <div class="projects-section-container">
                Sample projects
            </div>
        </section>
        <section class="contact-section">
            <div class="contact-section-container">
                Contact US
            </div>
        </section>
        <section class="top-container non-glass">
            <div class="header-logo">
                <div class="header-logo-title">
                    <img width="300px" height="50px" src="icons/top_title.svg">
                </div>
            </div>
            <div class="header-actions">
                <div>About us</div>
                <div>Projects</div>
                <div>Contact</div>
            </div>
        </section>
        <section class="middle-container">
            <div class="">
                <canvas id="logo-canvas">
                </canvas>
            </div>

            <div class="main-title">
                Empowering Businesses with Expert
                Consulting
            </div>
        </section>

    </div>
</body>

<script>
    const r = new rive.Rive({
        src: "rive/background_wave_anim.riv",
        canvas: document.getElementById("canvas"),
        autoplay: true,
        layout: new rive.Layout({
            fit: rive.Fit.Cover,
        }),
        stateMachines: "State Machine 1",
        useOffscreenRenderer: true,
        onLoad: () => {
            r.resizeDrawingSurfaceToCanvas();
        }
    });

    const r1 = new rive.Rive({
        src: "rive/logo_anim.riv",
        canvas: document.getElementById("logo-canvas"),
        autoplay: true,
        layout: new rive.Layout({
            fit: rive.Fit.Cover,
        }),
        stateMachines: "initial",
        useOffscreenRenderer: true,
        onLoad: () => {
            r1.resizeDrawingSurfaceToCanvas();
        }
    });

    let sectionsEles = document.querySelectorAll("section");

    let options = {
        root: null,
        rootMargin: "-100px",
        // threshold: 1.0,
    };

    let headerLogoEle = document.querySelector(".header-logo");
    let topContainerEle = document.querySelector(".top-container");

    function logoSlideIn() {
        headerLogoEle.classList.add('logo-slide')
        headerLogoEle.classList.remove('logo-slide-reverse')
        // topContainerEle.classList.add('non-glass')
        // topContainerEle.classList.remove('glass')
    }

    function logoSlideOut() {
        headerLogoEle.classList.remove('logo-slide')
        headerLogoEle.classList.add('logo-slide-reverse')
        // topContainerEle.classList.remove('non-glass')
        // topContainerEle.classList.add('glass')
    }


    let callback = (entries, observer) => {
        entries.forEach((entry) => {

            if (entry.target.classList[0] == 'middle-container' && !entry.isIntersecting) {
                logoSlideIn()
            }

            if (entry.target.classList[0] == 'middle-container' && entry.isIntersecting && document.querySelector(".header-logo").classList.contains('logo-slide')) {
                logoSlideOut()
            }
        });
    }

    let observer = new IntersectionObserver(callback, options);
    sectionsEles.forEach(sectionsEle => observer.observe(sectionsEle));

</script>

</html>